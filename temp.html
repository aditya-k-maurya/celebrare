<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Interactive Text Editor</title>
		<link rel="stylesheet" href="style.css" />

		<style>
			body {
				margin: 0;
				padding: 0;
				font-family: Arial, sans-serif;
				display: flex;
				height: 100vh;
			}

			.container {
				display: flex;
				width: 100%;
			}

			.editor {
				flex: 3;
				display: flex;
				justify-content: center;
				align-items: center;
				background-color: #f4f4f4;
				border-right: 1px solid #ccc;
				position: relative;
			}

			.main-box {
				width: 80%;
				height: 80%;
				background-color: white;
				border: 2px dashed #ccc;
				position: relative;
				overflow: hidden;
			}

			.text-item {
				position: absolute;
				cursor: grab;
				user-select: none;
				transform-origin: center;
			}

			.toolbar {
				flex: 1;
				padding: 20px;
				background-color: #fff;
				display: flex;
				flex-direction: column;
				gap: 15px;
				align-items: flex-start;
			}

			.toolbar button {
				padding: 10px 20px;
				background-color: #007bff;
				color: white;
				border: none;
				cursor: pointer;
			}

			.toolbar button:hover {
				background-color: #0056b3;
			}

			input[type="range"] {
				width: 100%;
			}

			select {
				padding: 5px;
				width: 100%;
			}
		</style>
	</head>
	<body>
		<div class="container">
			<div class="editor">
				<!-- Main Box -->
				<div class="main-box" id="mainBox">
					<!-- Placeholder for draggable text -->
				</div>
			</div>
			<div class="toolbar">
				<!-- Add Text Button -->
				<button id="addText">Add Text</button>

				<!-- Font Size -->
				<label for="fontSize">Font Size:</label>
				<input type="range" id="fontSize" min="10" max="50" value="20" />

				<!-- Font Family -->
				<label for="fontFamily">Font:</label>
				<select id="fontFamily">
					<option value="Arial">Arial</option>
					<option value="Georgia">Georgia</option>
					<option value="Courier New">Courier New</option>
					<option value="Times New Roman">Times New Roman</option>
					<option value="Verdana">Verdana</option>
				</select>
			</div>
		</div>

		<script>
			document.addEventListener("DOMContentLoaded", () => {
				const mainBox = document.getElementById("mainBox");
				const addTextBtn = document.getElementById("addText");
				const fontSizeInput = document.getElementById("fontSize");
				const fontFamilySelect = document.getElementById("fontFamily");
				let selectedText = null;

				// Add Text Button Click
				addTextBtn.addEventListener("click", () => {
					const textItem = document.createElement("div");
					textItem.classList.add("text-item");
					textItem.textContent = "New Text";
					textItem.style.fontSize = fontSizeInput.value + "px";
					textItem.style.fontFamily = fontFamilySelect.value;
					textItem.style.left = "50px";
					textItem.style.top = "50px";
					mainBox.appendChild(textItem);

					// Make Text Draggable and Clickable
					enableTextInteractions(textItem);
				});

				// Enable Font Size and Font Family Change
				fontSizeInput.addEventListener("input", () => {
					if (selectedText) {
						selectedText.style.fontSize = fontSizeInput.value + "px";
					}
				});

				fontFamilySelect.addEventListener("change", () => {
					if (selectedText) {
						selectedText.style.fontFamily = fontFamilySelect.value;
					}
				});

				// Enable Drag and Rotate for Text Items
				function enableTextInteractions(textItem) {
					textItem.addEventListener("click", (e) => {
						e.stopPropagation();
						selectedText = textItem;
					});

					let isDragging = false;
					let isRotating = false;
					let startX, startY, startLeft, startTop, startAngle;

					textItem.addEventListener("mousedown", (e) => {
						if (e.shiftKey) {
							isRotating = true;
							const rect = textItem.getBoundingClientRect();
							startX = e.clientX - rect.left;
							startY = e.clientY - rect.top;
							startAngle = parseFloat(
								textItem.getAttribute("data-angle") || "0"
							);
						} else {
							isDragging = true;
							startX = e.clientX;
							startY = e.clientY;
							startLeft = parseFloat(textItem.style.left);
							startTop = parseFloat(textItem.style.top);
						}
						textItem.style.cursor = isRotating ? "crosshair" : "grabbing";
					});

					document.addEventListener("mousemove", (e) => {
						if (isDragging) {
							const dx = e.clientX - startX;
							const dy = e.clientY - startY;
							textItem.style.left = startLeft + dx + "px";
							textItem.style.top = startTop + dy + "px";
						}
						if (isRotating) {
							const dx = e.clientX - mainBox.offsetLeft - startX;
							const dy = e.clientY - mainBox.offsetTop - startY;
							const angle = startAngle + Math.atan2(dy, dx) * (180 / Math.PI);
							textItem.style.transform = `rotate(${angle}deg)`;
							textItem.setAttribute("data-angle", angle);
						}
					});

					document.addEventListener("mouseup", () => {
						isDragging = false;
						isRotating = false;
						textItem.style.cursor = "grab";
					});
				}
			});
		</script>
	</body>
</html>
